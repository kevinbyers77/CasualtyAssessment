<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Casualty Assessment Report</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Casualty Assessment Report <span id="save-status"></span></h1>
    <nav>
      <button onclick="showForm()">New Report</button>
      <button onclick="showRecords()">Saved Reports</button>
      <button onclick="showArchived()">Archived Reports</button>
    </nav>
  </header>

  <!-- Report Form -->
  <section id="form-section" style="display:none;">
    <form id="casualty-form">

      <!-- Patient Info -->
      <fieldset>
        <legend>Patient Info</legend>
        <label>Patient Name: <input type="text" id="patientName"></label>
        <label>Date of Birth: <input type="date" id="dob"></label>
        <label>Gender:
          <select id="gender">
            <option value="">-- Select --</option>
            <option value="M">Male</option>
            <option value="F">Female</option>
          </select>
        </label>
      </fieldset>

      <!-- Injury Info -->
      <fieldset>
        <legend>Injury Info</legend>
        <div class="row">
          <label>Date of Injury: <input type="date" id="injuryDate"></label>
          <label>Time of Injury: <input type="time" id="injuryTime"></label>
        </div>
        <div class="row">
          <label>Home Address: <input type="text" id="homeAddress"></label>
          <label>Town: <input type="text" id="town"></label>
        </div>
        <div class="row">
          <label>State: <input type="text" id="state"></label>
          <label>Postcode: <input type="text" id="postcode"></label>
        </div>
        <div class="row">
          <label>Employee No: <input type="text" id="employeeNo"></label>
          <label>Contractor Company: <input type="text" id="contractor"></label>
          <label>Occupation: <input type="text" id="occupation"></label>
        </div>
        <div class="row">
          <label>Shift Start: <input type="time" id="shiftStart"></label>
          <label>Injury Location: <input type="text" id="injuryLocation"></label>
        </div>
      </fieldset>

      <!-- History -->
      <fieldset>
        <legend>History of Injury/Illness</legend>
        <div class="help-text">
          What job was being done? Environmental conditions? Who witnessed? How did the injury occur?
        </div>
        <textarea id="history"></textarea>
        <label>Recurring Injury?
          <input type="radio" name="recurring" value="Yes" onclick="toggleRecurring(true)"> Yes
          <input type="radio" name="recurring" value="No" onclick="toggleRecurring(false)"> No
        </label>
        <div id="recurringDateField" style="display:none;">
          <label>Date of Original Injury: <input type="date" id="recurringDate"></label>
        </div>
      </fieldset>

      <!-- Primary Assessment -->
      <fieldset>
        <legend>Primary Assessment</legend>
        <label>Danger: <input type="checkbox" id="danger"></label>
        <label>Response:
          <select id="response">
            <option value="">-- Select --</option>
            <option>Conscious</option>
            <option>Semi-conscious</option>
            <option>Unconscious</option>
          </select>
        </label>
        <label>HELP: 
          <input type="checkbox" id="help000"> 000 
          <input type="checkbox" id="help112"> 112
        </label>
        <label>Airway:
          <select id="airway">
            <option value="">-- Select --</option>
            <option>Clear</option>
            <option>Obstructed</option>
            <option>Guedel</option>
          </select>
        </label>
        <label>Breathing:
          <select id="breathing">
            <option value="">-- Select --</option>
            <option>Normal</option>
            <option>Abnormal</option>
            <option>Absent</option>
          </select>
        </label>
        <label>Signs of Life:
          <select id="signsOfLife">
            <option value="">-- Select --</option>
            <option>Pink</option>
            <option>Pale</option>
            <option>Cyanosed</option>
          </select>
        </label>
      </fieldset>

      <!-- Casualty Observations -->
      <fieldset>
        <legend>Casualty Observations</legend>
        <table id="observations-table">
          <thead>
            <tr>
              <th>Time</th>
              <th>Pulse</th>
              <th>BP</th>
              <th>Breaths/min</th>
              <th>GCS</th>
              <th>Pupil L</th>
              <th>Pupil R</th>
              <th>React L</th>
              <th>React R</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <button type="button" onclick="addObservationRow()">Add Row</button>
      </fieldset>

      <!-- Secondary Assessment -->
  <fieldset>
  <legend>Secondary Assessment of Injuries</legend>
  <div style="display: flex; gap: 2em;">
    <!-- Left column: Key -->
    <div style="flex: 1;">
      <h4>Injury Key</h4>
      <ul style="list-style: none; padding-left: 0;">
        <li><strong>A</strong> – Abrasions</li>
        <li><strong>L</strong> – Laceration</li>
        <li><strong>B</strong> – Burn (Full / Partial / Superficial)</li>
        <li><strong>P</strong> – Pain</li>
        <li><strong>S</strong> – Swelling</li>
        <li><strong>O</strong> – Open Fracture</li>
        <li><strong>Am</strong> – Amputation</li>
        <li><strong>C</strong> – Contusion</li>
        <li><strong>T</strong> – Tenderness</li>
        <li><strong>D</strong> – Deformity</li>
        <li><strong>E</strong> – Embedded Object</li>
      </ul>
    </div>

    <!-- Right column: Diagrams -->
    <div style="flex: 2; text-align: center;">
      <div style="display: flex; gap: 2em; justify-content: center;">
        <div>
          <canvas id="diagram-front" width="200" height="400"></canvas>
          <button type="button" id="undo-front">Undo Last</button>
          <p>Front</p>
        </div>
        <div>
          <canvas id="diagram-back" width="200" height="400"></canvas>
          <button type="button" id="undo-back">Undo Last</button>
          <p>Back</p>
        </div>
      </div>

      <!-- Questions under diagrams -->
      <div style="margin-top: 1em; text-align: left;">
        <p><strong>Fluid/Air Injection Injury:</strong>
          <label><input type="radio" name="fluidInjury" value="Yes"> Yes</label>
          <label><input type="radio" name="fluidInjury" value="No"> No</label>
        </p>

        <p><strong>Breath Sounds:</strong></p>
        <label><input type="checkbox" name="breathSounds" value="Clear"> Clear</label>
        <label><input type="checkbox" name="breathSounds" value="Wheezy"> Wheezy</label>
        <label><input type="checkbox" name="breathSounds" value="Decreased"> Decreased</label>
        <label><input type="checkbox" name="breathSounds" value="Noisy"> Noisy</label>
      </div>
    </div>
  </div>
</fieldset>

      <!-- Key Questions -->
      <fieldset>
        <legend>Key Questions</legend>
        <label>Can you remember what happened? 
          <input type="radio" name="remember" value="Yes"> Yes
          <input type="radio" name="remember" value="No"> No
        </label>
        <label>Where does it hurt most? <input type="text" id="hurtMost"></label>
        <label>Pain rating (1–10): <input type="number" id="painRating" min="1" max="10"></label>
        <label>Can you take a deep breath? 
          <input type="radio" name="deepBreath" value="Yes"> Yes
          <input type="radio" name="deepBreath" value="No"> No
        </label>
      </fieldset>

      <!-- Allergies -->
      <fieldset>
        <legend>Allergies</legend>
        <label>
          <input type="radio" name="allergies" value="No"> No
          <input type="radio" name="allergies" value="Yes"> Yes
        </label>
        <input type="text" id="allergyDetails" placeholder="If yes, specify">
      </fieldset>

      <!-- Previous Illness -->
      <fieldset>
        <legend>Previous Illness</legend>
        <label><input type="checkbox" value="Cardiac" class="illness"> Cardiac</label>
        <label><input type="checkbox" value="Diabetes" class="illness"> Diabetes</label>
        <label><input type="checkbox" value="Epilepsy" class="illness"> Epilepsy</label>
        <label><input type="checkbox" value="Respiratory" class="illness"> Respiratory</label>
        <label><input type="checkbox" value="Hypertension" class="illness"> Hypertension</label>
        <label><input type="checkbox" value="Renal" class="illness"> Renal</label>
        <label><input type="checkbox" value="Stroke" class="illness"> Stroke</label>
        <label><input type="checkbox" value="Psychological" class="illness"> Psychological</label>
      </fieldset>

      <!-- Medications -->
      <fieldset>
        <legend>Medications</legend>
        <label>Regular medications: <textarea id="regularMeds"></textarea></label>
        <label>Medications taken today: <textarea id="todayMeds"></textarea></label>
      </fieldset>

      <!-- Vitals -->
      <fieldset>
        <legend>Vitals</legend>
        <label>Heart Rate: <input type="text" id="heartRate"></label>
        <label>Blood Pressure: <input type="text" id="bloodPressure"></label>
      </fieldset>

      <!-- Treatment Notes -->
      <fieldset>
        <legend>Treatment Notes</legend>
        <textarea id="treatment"></textarea>
      </fieldset>

      <!-- Signature -->
      <fieldset>
        <legend>Signature</legend>
        <canvas id="signature-pad"></canvas>
        <label>Signer Name: <input type="text" id="signerName"></label>
        <div class="button-row">
          <button type="button" onclick="clearSignature()">Clear Signature</button>
          <button type="submit">Save Report</button>
        </div>
      </fieldset>
    </form>
  </section>

  <!-- Saved Reports -->
  <section id="records-section" style="display:none;">
    <h2>Active Reports</h2>
    <ul id="records-list"></ul>
  </section>

  <!-- Archived Reports -->
  <section id="archived-section" style="display:none;">
    <h2>Archived Reports</h2>
    <ul id="archived-list"></ul>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
