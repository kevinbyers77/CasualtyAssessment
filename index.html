<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Casualty Assessment</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
  <header>
    <h1>Casualty Assessment Report</h1>
    <nav>
      <button id="btn-new" onclick="showForm()">New Report</button>
      <button id="btn-saved" onclick="showRecords()">Saved Reports</button>
      <button id="btn-archived" onclick="showArchived()">Archived Reports</button>
    </nav>
    <div id="save-status"></div>
  </header>

  <!-- FORM SECTION -->
  <section id="form-section" style="display:none;">
    <form id="casualty-form">

      <!-- Patient Info -->
      <fieldset>
        <legend>Patient Info</legend>
        <div class="row">
          <div class="field">
            <label for="patientName">Name</label>
            <input id="patientName" type="text">
          </div>
          <div class="field">
            <label for="dob">Date of Birth</label>
            <input id="dob" type="date">
          </div>
          <div class="field">
            <label for="gender">Gender</label>
            <input id="gender" type="text">
          </div>
        </div>
      </fieldset>

      <!-- Injury Details -->
      <fieldset>
        <legend>Injury Details</legend>
        <div class="row">
          <div class="field">
            <label for="injuryDate">Date</label>
            <input id="injuryDate" type="date">
          </div>
          <div class="field">
            <label for="injuryTime">Time</label>
            <input id="injuryTime" type="time">
          </div>
          <div class="field">
            <label for="injuryLocation">Location</label>
            <input id="injuryLocation" type="text">
          </div>
        </div>
      </fieldset>

      <!-- History -->
      <fieldset>
        <legend>History</legend>
        <div class="row">
          <div class="field">
            <label for="history">History of illness/injury</label>
            <textarea id="history"></textarea>
          </div>
        </div>
      </fieldset>

      <!-- Primary Survey -->
      <fieldset>
        <legend>Primary Survey</legend>
        <div class="row">
          <div class="field">
            <label for="response">Response</label>
            <input id="response" type="text">
          </div>
          <div class="field">
            <label for="airway">Airway</label>
            <input id="airway" type="text">
          </div>
          <div class="field">
            <label for="breathing">Breathing</label>
            <input id="breathing" type="text">
          </div>
          <div class="field">
            <label for="signsOfLife">Signs of Life</label>
            <input id="signsOfLife" type="text">
          </div>
        </div>
      </fieldset>

      <!-- Observations -->
      <fieldset>
        <legend>Observations</legend>
        <table id="observations-table">
          <thead>
            <tr>
              <th>Time</th><th>Pulse</th><th>BP</th><th>Breaths</th><th>GCS</th>
              <th>Pupil L</th><th>Pupil R</th><th>React L</th><th>React R</th><th></th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
        <button type="button" onclick="addObservationRow()">Add Row</button>
      </fieldset>

      <!-- Body Diagrams -->
      <fieldset>
        <legend>Body Diagrams</legend>
        <div class="row">
          <div class="field" id="front-wrap">
            <label>Front</label>
            <canvas id="diagram-front" width="200" height="400"></canvas>
            <button type="button" onclick="frontDiagram.undo()">Undo</button>
          </div>
          <div class="field" id="back-wrap">
            <label>Back</label>
            <canvas id="diagram-back" width="200" height="400"></canvas>
            <button type="button" onclick="backDiagram.undo()">Undo</button>
          </div>
        </div>
      </fieldset>

      <!-- Treatment -->
      <fieldset>
        <legend>Treatment</legend>
        <div class="row">
          <div class="field">
            <label for="treatment">Notes</label>
            <textarea id="treatment"></textarea>
          </div>
        </div>
      </fieldset>

      <!-- Signature -->
      <fieldset>
        <legend>Signature</legend>
        <div class="row">
          <div class="field">
            <canvas id="signature-pad" width="300" height="120"></canvas>
            <button type="button" id="clear-signature">Clear</button>
            <label for="signerName">Name</label>
            <input id="signerName" type="text">
          </div>
        </div>
      </fieldset>

      <button type="submit">Save Report</button>
    </form>
  </section>

  <!-- SAVED RECORDS -->
  <section id="records-section" style="display:block;">
    <h2>Saved Reports</h2>
    <ul id="records-list"></ul>
  </section>

  <!-- ARCHIVED RECORDS -->
  <section id="archived-section" style="display:none;">
    <h2>Archived Reports</h2>
    <ul id="archived-list"></ul>
  </section>

  <script src="script.js"></script>
</body>
</html>
